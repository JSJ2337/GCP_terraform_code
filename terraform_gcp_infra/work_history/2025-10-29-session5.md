## ğŸ“… ì„¸ì…˜ 5 ì‘ì—… ë‚´ì—­ (2025-10-29)

**ì‘ì—…ì**: Claude Code
**ëª©ì **: Cloud SQL MySQL ë° Load Balancer ëª¨ë“ˆ ì¶”ê°€

### ğŸ¯ ì‘ì—… ìš”ì•½

ë°ì´í„°ë² ì´ìŠ¤ì™€ ë¡œë“œ ë°¸ëŸ°ì„œ ì¸í”„ë¼ ì§€ì›ì„ ìœ„í•œ ìƒˆë¡œìš´ Terraform ëª¨ë“ˆ ë° í™˜ê²½ ë ˆì´ì–´ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

### ì™„ë£Œëœ ì‘ì—… âœ…

#### 1. Cloud SQL MySQL ëª¨ë“ˆ ìƒì„± (`modules/cloudsql-mysql`)

**ì£¼ìš” ê¸°ëŠ¥**:
- MySQL ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ê´€ë¦¬
- High Availability (REGIONAL/ZONAL) ì§€ì›
- Private IP ë„¤íŠ¸ì›Œí‚¹
- ìë™ ë°±ì—… ë° Point-in-Time Recovery
- ì½ê¸° ë³µì œë³¸ (Read Replica) ì§€ì›
- Query Insights ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- ë°ì´í„°ë² ì´ìŠ¤ ë° ì‚¬ìš©ì ê´€ë¦¬
- ë°ì´í„°ë² ì´ìŠ¤ í”Œë˜ê·¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- ì‚­ì œ ë°©ì§€ ì„¤ì •

**ìƒì„±ëœ íŒŒì¼**:
- `main.tf`: ë¦¬ì†ŒìŠ¤ ì •ì˜ (instance, databases, users, replicas)
- `variables.tf`: ì…ë ¥ ë³€ìˆ˜ (80ê°œ ì´ìƒ)
- `outputs.tf`: ì¶œë ¥ ê°’ (connection info, IPs)
- `README.md`: í•œê¸€ ë¬¸ì„œ (ì‚¬ìš©ë²•, ì˜ˆì œ, ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤)

**ì§€ì›í•˜ëŠ” ë¨¸ì‹  íƒ€ì…**:
- Shared-core: `db-f1-micro`, `db-g1-small`
- Standard: `db-n1-standard-1` ~ `db-n1-standard-96`
- High-mem: `db-n1-highmem-2` ~ `db-n1-highmem-96`

#### 2. Load Balancer ëª¨ë“ˆ ìƒì„± (`modules/load-balancer`)

**ì£¼ìš” ê¸°ëŠ¥**:
- **HTTP(S) Load Balancer**: ê¸€ë¡œë²Œ, ì™¸ë¶€ íŠ¸ë˜í”½
- **Internal HTTP(S) Load Balancer**: ë¦¬ì „ë³„, ë‚´ë¶€ íŠ¸ë˜í”½
- **Internal TCP/UDP Load Balancer**: ë¦¬ì „ë³„, ë‚´ë¶€ íŠ¸ë˜í”½
- Health Check (Global ë° Regional)
- SSL/TLS ì¢…ë£Œ
- Cloud CDN í†µí•©
- Identity-Aware Proxy (IAP)
- URL ë¼ìš°íŒ… ë° í˜¸ìŠ¤íŠ¸ ê·œì¹™
- ì„¸ì…˜ ì¹œí™”ì„± (Session Affinity)
- ê³ ì • IP ì£¼ì†Œ ì§€ì›

**ìƒì„±ëœ íŒŒì¼**:
- `main.tf`: ë¦¬ì†ŒìŠ¤ ì •ì˜ (300+ ì¤„, ì¡°ê±´ë¶€ ë¦¬ì†ŒìŠ¤ ìƒì„±)
- `variables.tf`: ì…ë ¥ ë³€ìˆ˜ (40ê°œ ì´ìƒ)
- `outputs.tf`: ì¶œë ¥ ê°’ (backend, health check, forwarding rule)
- `README.md`: í•œê¸€ ë¬¸ì„œ (ê° LB íƒ€ì…ë³„ ì˜ˆì œ, ë¹„êµí‘œ)

**ì§€ì›í•˜ëŠ” Load Balancer íƒ€ì…**:
| íƒ€ì… | ë²”ìœ„ | í”„ë¡œí† ì½œ | ìš©ë„ |
|------|------|----------|------|
| HTTP(S) | ê¸€ë¡œë²Œ | HTTP, HTTPS | ì™¸ë¶€ ì›¹ íŠ¸ë˜í”½ |
| Internal HTTP(S) | ë¦¬ì „ | HTTP, HTTPS | ë‚´ë¶€ ì›¹ íŠ¸ë˜í”½ |
| Internal TCP/UDP | ë¦¬ì „ | TCP, UDP | ë‚´ë¶€ ì• í”Œë¦¬ì¼€ì´ì…˜ |

#### 3. í™˜ê²½ ë ˆì´ì–´ ì¶”ê°€

**60-database ë ˆì´ì–´** (`environments/prod/proj-default-templet/60-database`):
- Cloud SQL MySQL ë°°í¬ìš©
- Backend state: `proj-default-templet/60-database`
- íŒŒì¼: backend.tf, main.tf, variables.tf, outputs.tf, terraform.tfvars.example

**70-loadbalancer ë ˆì´ì–´** (`environments/prod/proj-default-templet/70-loadbalancer`):
- Load Balancer ë°°í¬ìš©
- Backend state: `proj-default-templet/70-loadbalancer`
- íŒŒì¼: backend.tf, main.tf, variables.tf, outputs.tf, terraform.tfvars.example
- ì˜ˆì œ: HTTP LB, HTTPS with SSL, Internal LB, Internal TCP LB (4ê°€ì§€)

#### 4. Load Balancer ëª¨ë“ˆ ë²„ê·¸ ìˆ˜ì •

**ìˆ˜ì • 1: Static IP ì°¸ì¡° ë¡œì§**
- **ë¬¸ì œ**: Forwarding ruleì—ì„œ ìƒì„±ëœ static IPë¥¼ ì°¸ì¡°í•˜ì§€ ëª»í•¨
- **ìˆ˜ì •**: ì¡°ê±´ë¶€ ì°¸ì¡° ì¶”ê°€
```terraform
ip_address = var.create_static_ip ? google_compute_global_address.default[0].address :
             (var.static_ip_address != "" ? var.static_ip_address : null)
```

**ìˆ˜ì • 2: Regional Health Check ì§€ì›**
- **ë¬¸ì œ**: Internal Classic LBëŠ” regional health check í•„ìš”
- **ìˆ˜ì •**: `google_compute_region_health_check` ë¦¬ì†ŒìŠ¤ ì¶”ê°€

**ìˆ˜ì • 3: ë¦¬ì†ŒìŠ¤ ì´ë¦„ ê¸°ë³¸ê°’**
- **ë¬¸ì œ**: URL Map, Target Proxy ì´ë¦„ì´ ë¹„ì–´ìˆì„ ë•Œ ì—ëŸ¬
- **ìˆ˜ì •**: ìë™ ì´ë¦„ ìƒì„±
```terraform
name = var.url_map_name != "" ? var.url_map_name : "${var.backend_service_name}-url-map"
```

**ìˆ˜ì • 4: SSL Policy null ì²˜ë¦¬**
- **ë¬¸ì œ**: ë¹ˆ ë¬¸ìì—´ë¡œ ì „ë‹¬ ì‹œ ì—ëŸ¬ ë°œìƒ
- **ìˆ˜ì •**: ë¹ˆ ë¬¸ìì—´ì„ nullë¡œ ë³€í™˜
```terraform
ssl_policy = var.ssl_policy != "" ? var.ssl_policy : null
```

**ìˆ˜ì • 5: IAP enabled ì†ì„±**
- **ë¬¸ì œ**: IAP ë¸”ë¡ì— `enabled` ì†ì„± ëˆ„ë½
- **ìˆ˜ì •**: `enabled = true` ì¶”ê°€

#### 5. ë¬¸ì„œ ì—…ë°ì´íŠ¸

**ë©”ì¸ 00_README.md ì—…ë°ì´íŠ¸**:
- ëª¨ë“ˆ ëª©ë¡ì— `cloudsql-mysql`, `load-balancer` ì¶”ê°€
- ë ˆì´ì–´ êµ¬ì¡°ì— `60-database`, `70-loadbalancer` ì¶”ê°€
- ë°°í¬ ìˆœì„œì— ë°ì´í„°ë² ì´ìŠ¤ ë° ë¡œë“œ ë°¸ëŸ°ì„œ ë‹¨ê³„ ì¶”ê°€
- State ê´€ë¦¬ ì•„í‚¤í…ì²˜ ì˜ˆì‹œ ì—…ë°ì´íŠ¸
- í”„ë¡œì íŠ¸ëª… ë³€ê²½: `proj-game-a` â†’ `proj-default-templet`

**locals.tf ë ˆì´ë¸” ì—…ë°ì´íŠ¸**:
- `cost_center`: `gaming` â†’ `IT_infra_deps`
- `created_by`: `platform-team` â†’ `system-team`

#### 6. ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ë¬¸ì„œ ìƒì„± (`01_ARCHITECTURE.md`)

**í¬í•¨ëœ ë‹¤ì´ì–´ê·¸ë¨** (Mermaid í˜•ì‹):
1. **ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°**: Bootstrap, Modules, Environments ê´€ê³„
2. **State ê´€ë¦¬ ì•„í‚¤í…ì²˜**: ì¤‘ì•™ ì§‘ì¤‘ì‹ State ê´€ë¦¬ íë¦„
3. **ë°°í¬ ìˆœì„œ ë° ì˜ì¡´ì„±**: 8ê°œ ë ˆì´ì–´ ë°°í¬ ìˆœì„œì™€ ë³‘ë ¬ ì²˜ë¦¬
4. **ëª¨ë“ˆ êµ¬ì¡°**: 9ê°œ ëª¨ë“ˆì˜ ì—­í• ê³¼ ê´€ê³„
5. **ì‹¤ì œ GCP ë¦¬ì†ŒìŠ¤ êµ¬ì¡°**: VPC, VM, DB, LB ë“± ì‹¤ì œ ë¦¬ì†ŒìŠ¤ ë°°ì¹˜
6. **ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜**: ì„œë¸Œë„·, ë°©í™”ë²½, NAT ë“± ë„¤íŠ¸ì›Œí¬ íë¦„
7. **Terraform ì‹¤í–‰ íë¦„**: init, plan, apply ì‹œí€€ìŠ¤
8. **ëª¨ë“ˆ ì¬ì‚¬ìš© ì˜ˆì œ**: í™˜ê²½ë³„ ëª¨ë“ˆ ì¬ì‚¬ìš© íŒ¨í„´
9. **ì£¼ìš” ì„¤ê³„ ê²°ì •**: ì•„í‚¤í…ì²˜ ê²°ì • ì´ìœ  ì„¤ëª…
10. **í™•ì¥ ë¡œë“œë§µ**: Phase 1-4 í™•ì¥ ê³„íš

**ë¬¸ì„œ íŠ¹ì§•**:
- âœ… 10ê°œì˜ Mermaid ë‹¤ì´ì–´ê·¸ë¨
- âœ… GitHub/GitLabì—ì„œ ìë™ ë Œë”ë§
- âœ… ì‹œê°ì ìœ¼ë¡œ ì¸í”„ë¼ êµ¬ì¡° ì´í•´ ê°€ëŠ¥
- âœ… ì˜ì¡´ì„± ê´€ê³„ ëª…í™•íˆ í‘œì‹œ
- âœ… í™•ì¥ ê³„íš í¬í•¨

**ë‹¤ì´ì–´ê·¸ë¨ ê°œì„ **:
- 4ë²ˆ ëª¨ë“ˆ êµ¬ì¡°ë¥¼ ê°„ë‹¨í•˜ê³  ëª…í™•í•˜ê²Œ ì¬ì„¤ê³„
- ë³µì¡í•œ subgraph ì œê±°, ë‹¨ìˆœí•œ ë…¸ë“œ ë°°ì¹˜ë¡œ ë³€ê²½
- ëª¨ë“ˆ ëª©ë¡ í‘œ ì¶”ê°€ë¡œ ê°€ë…ì„± í–¥ìƒ

### ğŸ“Š í†µê³„

- **ì¶”ê°€ëœ ëª¨ë“ˆ**: 2ê°œ (cloudsql-mysql, load-balancer)
- **ì¶”ê°€ëœ ë ˆì´ì–´**: 2ê°œ (60-database, 70-loadbalancer)
- **ìƒì„±ëœ íŒŒì¼**: 19ê°œ (ëª¨ë“ˆ/ë ˆì´ì–´ 18ê°œ + 01_ARCHITECTURE.md 1ê°œ)
- **ì¶”ê°€ëœ ì½”ë“œ ë¼ì¸**: 2,840ì¤„ (Terraform) + 600ì¤„ (ë¬¸ì„œ)
- **ë²„ê·¸ ìˆ˜ì •**: 5ê°œ
- **ìƒì„±ëœ ë‹¤ì´ì–´ê·¸ë¨**: 10ê°œ (Mermaid)
- **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: 00_README.md, 04_WORK_HISTORY.md, 03_QUICK_REFERENCE.md, 02_CHANGELOG.md, 01_ARCHITECTURE.md (ì‹ ê·œ)

### ğŸ”§ ì»¤ë°‹ ì´ë ¥

1. `feat: Cloud SQL MySQL ë° Load Balancer ëª¨ë“ˆ ì¶”ê°€` (4ec9839)
2. `chore: locals.tf ë ˆì´ë¸” ì •ë³´ ì—…ë°ì´íŠ¸` (36a1947)
3. `fix: Load Balancer ëª¨ë“ˆ ì˜¤ë¥˜ ìˆ˜ì •` (ccbad1f)
4. `fix: log_config ë° IAP ë¸”ë¡ ì†ì„± ìˆ˜ì •` (d9f1eb2)
5. `docs: README ë° WORK_HISTORY ì—…ë°ì´íŠ¸` (ì˜ˆì •)

### ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥ì‚¬í•­

#### 60-database ë ˆì´ì–´ ë°°í¬
```bash
cd environments/prod/proj-default-templet/60-database
cp terraform.tfvars.example terraform.tfvars
# terraform.tfvars í¸ì§‘ (í”„ë¡œì íŠ¸ ID, ë„¤íŠ¸ì›Œí¬ ì„¤ì •)
terraform init
terraform plan
terraform apply
```

#### 70-loadbalancer ë ˆì´ì–´ ë°°í¬
```bash
cd ../70-loadbalancer
cp terraform.tfvars.example terraform.tfvars
# terraform.tfvars í¸ì§‘ (LB íƒ€ì…, ë°±ì—”ë“œ ì„¤ì •)
terraform init
terraform plan
terraform apply
```

### ì°¸ê³  ìë£Œ
- [ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨](01_ARCHITECTURE.md) â­ ì‹ ê·œ
- [Cloud SQL MySQL ëª¨ë“ˆ ë¬¸ì„œ](modules/cloudsql-mysql/README.md)
- [Load Balancer ëª¨ë“ˆ ë¬¸ì„œ](modules/load-balancer/README.md)
- [ë©”ì¸ README](00_README.md)
- [QUICK_REFERENCE](03_QUICK_REFERENCE.md)
- [CHANGELOG](02_CHANGELOG.md)

---

